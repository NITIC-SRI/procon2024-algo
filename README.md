# 高専プロコン2024 競技部門

## 用語
このリポジトリを読むのに必要な用語を以下に記述する。

- Fillone(一埋め)

$1 \times 1$サイズの抜き型を使って最大 $3HW$ で盤面を揃えることができるアルゴリズム。
まず一番上の行を揃えることを考える。一番上の行の一番に来る要素を盤面から探し、それを行内に持ってくる。次にその要素を一番右に持っていく。これを繰り返すことで一番上の行を揃えることができる。
一番上の行を揃えたら22番の抜き型を使うことでその行を一番下に移動させる。
この操作を繰り返すことで盤面を揃えることができる。

- Fillone Distance

上述したFilloneの操作回数をその盤面における距離とする。
- Absolute Distance
その盤面と終盤面を比べた時、揃っていない要素の個数を距離とする。

- Fillone Greedy

Fillone Distanceが最小になるように貪欲法を行う。
- Absolute Greedy
Absolute Distanceが最小になるように貪欲法を行う。
合法手を列挙して実際に操作をした後でスコアを算出すると、操作する分のオーバーヘッドが発生する。
そのため、実際には操作をせずにスコアを算出することで、実行時間を削減することができる。

- Down Fillone Greedy

一番上の行を下寄せの貪欲法で揃え、その行を一番下に移動することを繰り返して終盤面を作る。
貪欲法を繰り返して行が揃わない場合は、揃っていない部分に対してRight/Leftの操作をすることで揃えられるようにする。
また、 $128 \times 128$ 盤面に対しては全探索で間に合うが、 $256 \times 256$ 盤面に対しては。間に合わないため、モンテカルロ法を用いる。

- Caterpillar

3手で上の行を崩さずに任意の場所に任意の要素を持ってくることができるアルゴリズム。
Down Filloneを行う際に、同じ列に必要な要素がない場合下寄せだけでは揃えられないため、このアルゴリズムを用いる。

- Line Fillone

Down Fillone Greedyを行うと、同じ行内にのみ揃えたい要素がある場合、揃っていない箇所のRight/Left操作だけで揃えたい要素を真下に持ってくることは不可能である。
Caterpillarを用いて行の要素の個数を揃えた後にFilloneをその行に限定して行うことでその行を揃えることができる。

## 戦略
### 最終的に採用したアルゴリズム

- Down Fillone Greedy

#### 結果
- $32 \times 32$: $500$手
- $64 \times 64$: $1700$手
- $128 \times 128$: $5400$手
- $256 \times 256$: $22000$手

## ドキュメント

- rust
```bash
cd rs
cargo doc --open
```

## ビジュアライザーの使い方

`rs-visualizer/src-tauri/submit.json`に提出するjsonを記述し、以下のコマンドを打つ。

```bash
cd rs-visualizer
bun i
bun run tauri dev
```

